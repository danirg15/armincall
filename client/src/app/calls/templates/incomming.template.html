<modal #incommingCallModal 
                title="Llamada entrante"
                modalClass="modal-lg"
                [hideCloseButton]="false"
                [closeOnEscape]="true"
                [closeOnOutsideClick]="true">

<modal-header>
    
</modal-header>

<modal-content>
    
    <h2 class="text-center" *ngIf="incommingCall.workshop">
        <i class="icon-lg ion-ios-pulse"></i>
        {{incommingCall.workshop.name}}
        <small>{{incommingCall.number | formattedPhone}}</small>
    </h2>
    <h2 class="text-center" *ngIf="!incommingCall.workshop">
        <i class="icon-lg ion-ios-pulse"></i>
        {{incommingCall.number | formattedPhone}}
    </h2>

    <div class="row">
        <div class="col-md-5">  
            <form class="form-horizontal">
                <div class="form-group">
                    <label class="col-lg-3 control-label">Contacto:</label>
                    <div class="col-lg-9">
                        <input type="text" class="form-control" readonly 
                        value="{{incommingCall.workshop?.contact}}">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-lg-3 control-label">Distribuidor:</label>
                    <div class="col-lg-9">
                        <input type="text" class="form-control" readonly 
                        value="{{incommingCall.workshop?.distributor}}">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-lg-3 control-label">Dirección:</label>
                    <div class="col-lg-9">
                        <input type="text" class="form-control" readonly 
                        value="{{incommingCall.workshop?.address?.description}}">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-lg-3 control-label">DMS:</label>
                    <div class="col-lg-9">
                        <input type="text" class="form-control" readonly 
                        value="{{incommingCall.workshop?.current_dms}}">
                    </div>
                </div>
                <!--<div class="form-group">
                    <label class="col-lg-3 control-label">Licencia:</label>
                    <div class="col-lg-9">
                        <input type="text" class="form-control" readonly 
                        value="ARMIN PRO, ARMIN GEST (fake)">
                    </div>
                </div>-->
            </form>
        </div>

        <div class="col-md-offset-2 col-md-5">  
            <!--<div *ngIf="incommingCall.workshop">
                <a class="btn btn-primary btn-sm"
                   [routerLink]="['/tickets/new', incommingCall.workshop._id]">
                   Abrir incidencia
                </a> 
            </div>-->
            <div *ngIf="!incommingCall.workshop">
                <a class="btn btn-primary btn-sm"
                   [routerLink]="['/workshops/new', {'number': incommingCall.number}]">
                   Crear taller
                </a> 
            </div>
        </div>

    </div>
    
    <hr>

    <section *ngIf="incommingCall.tickets.length > 0">
        <div class="page-header">
            <h4>Incidencias Pendientes</h4>
        </div>
        <table class="table table-striped table-hover">
            <thead class="thead-inverse">
                <tr>
                    <th>Fecha/Hora</th>
                    <th>Categoría</th>
                    <th>Descripción</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let ticket of incommingCall.tickets">
                    <td>{{ticket.createdAt | diffForHumans}}</td>
                    <td>{{ticket.category}}</td>
                    <td>{{ticket.description}}</td>
                </tr>
            </tbody>
        </table> 
    </section>
    
      
</modal-content>

<modal-footer>
</modal-footer>

</modal>